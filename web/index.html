<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="icon" href="constellation.png">
    <title>Babylon graph from JSON</title>

    <style>
      html, body {
        overflow: hidden;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
      }

      #renderCanvas {
        width: 100%;
        height: 100%;
        touch-action: none;
      }
    </style>

    <script src="js/babylon-4.1.0.js"></script>
    <script src="js/babylon.gui.min.js"></script>
  </head>

  <body>
    <canvas id="renderCanvas" touch-action="none"></canvas> //touch-action="none" for best results from PEP
    <script src="graph_vis.js"></script>
    <script>
      'use strict';

      const params = new URLSearchParams(document.location.search.substring(1));
      let graphName = params.get('graph');
      if(!graphName) {
        graphName = 'graph-5.json'
      }
      console.log(`Graph file: ${graphName}`)

      const nodeEvent = event => {
        console.log('Node event:', event);
      };
      fetch(graphName)
        .then(response => response.json())
        .then(data => {
          createGraph(data, nodeEvent);
        }
      );
    </script>
  </body>
</html>